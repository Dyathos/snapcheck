(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[758],{3079:function(e,t,r){Promise.resolve().then(r.bind(r,6820)),Promise.resolve().then(r.bind(r,3836)),Promise.resolve().then(r.bind(r,4104))},6820:function(e,t,r){"use strict";r.r(t),r.d(t,{CheckInItemList:function(){return C}});var n=r(7437),i=r(2265),s=r(5744),o=r(2210),a=r(6989),c=r(3763),l=r(5184),u=r(4977),d=r(9381),f="Switch",[m,p]=(0,a.b)(f),[h,x]=m(f),b=i.forwardRef((e,t)=>{let{__scopeSwitch:r,name:a,checked:l,defaultChecked:u,required:f,disabled:m,value:p="on",onCheckedChange:x,form:b,...g}=e,[v,w]=i.useState(null),N=(0,o.e)(t,e=>w(e)),k=i.useRef(!1),C=!v||b||!!v.closest("form"),[E=!1,S]=(0,c.T)({prop:l,defaultProp:u,onChange:x});return(0,n.jsxs)(h,{scope:r,checked:E,disabled:m,children:[(0,n.jsx)(d.WV.button,{type:"button",role:"switch","aria-checked":E,"aria-required":f,"data-state":j(E),"data-disabled":m?"":void 0,disabled:m,value:p,...g,ref:N,onClick:(0,s.M)(e.onClick,e=>{S(e=>!e),C&&(k.current=e.isPropagationStopped(),k.current||e.stopPropagation())})}),C&&(0,n.jsx)(y,{control:v,bubbles:!k.current,name:a,value:p,checked:E,required:f,disabled:m,form:b,style:{transform:"translateX(-100%)"}})]})});b.displayName=f;var g="SwitchThumb",v=i.forwardRef((e,t)=>{let{__scopeSwitch:r,...i}=e,s=x(g,r);return(0,n.jsx)(d.WV.span,{"data-state":j(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:t})});v.displayName=g;var y=e=>{let{control:t,checked:r,bubbles:s=!0,...o}=e,a=i.useRef(null),c=(0,l.D)(r),d=(0,u.t)(t);return i.useEffect(()=>{let e=a.current,t=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(t,"checked"),i=n.set;if(c!==r&&i){let t=new Event("click",{bubbles:s});i.call(e,r),e.dispatchEvent(t)}},[c,r,s]),(0,n.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...o,tabIndex:-1,ref:a,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function j(e){return e?"checked":"unchecked"}var w=r(345);let N=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)(b,{className:(0,w.cn)("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...i,ref:t,children:(0,n.jsx)(v,{className:(0,w.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});N.displayName=b.displayName;var k=r(6806);function C(e){let{items:t}=e,[r,s]=(0,i.useState)([]),o=Array.from(new Set(t.map(e=>e.category))),a=e=>{s(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},c=async e=>{try{let t=await fetch("/api/settings/checkin/".concat(e.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:!e.isActive})});if(!t.ok)throw Error("Failed to update item status");window.location.reload()}catch(e){console.error("Error updating item status:",e),alert("Une erreur est survenue lors de la mise \xe0 jour")}},l=async e=>{if(e.isDefault){alert("Les \xe9l\xe9ments standards ne peuvent pas \xeatre supprim\xe9s");return}if(confirm("\xcates-vous s\xfbr de vouloir supprimer cet \xe9l\xe9ment ?"))try{let t=await fetch("/api/settings/checkin/".concat(e.id),{method:"DELETE"});if(!t.ok)throw Error("Failed to delete item");window.location.reload()}catch(e){console.error("Error deleting item:",e),alert("Une erreur est survenue lors de la suppression")}};return(0,n.jsx)("div",{className:"divide-y",children:o.map(e=>(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsxs)("button",{onClick:()=>a(e),className:"w-full flex items-center justify-between text-left",children:[(0,n.jsx)("h3",{className:"text-lg font-medium",children:e}),(0,n.jsx)("span",{className:"text-gray-500",children:r.includes(e)?"▼":"▶"})]}),r.includes(e)&&(0,n.jsx)("div",{className:"mt-4 space-y-4",children:t.filter(t=>t.category===e).map(e=>(0,n.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[e.icon&&(0,n.jsx)("span",{className:"text-xl",children:e.icon}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-medium",children:e.name}),e.description&&(0,n.jsx)("p",{className:"text-sm text-gray-500",children:e.description}),e.isDefault&&(0,n.jsx)("span",{className:"inline-flex items-center rounded-full bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 mt-1",children:"Standard"}),e.isRequired&&(0,n.jsx)("span",{className:"inline-flex items-center rounded-full bg-red-50 px-2 py-1 text-xs font-medium text-red-700 mt-1 ml-2",children:"Obligatoire"})]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)(N,{checked:e.isActive,onCheckedChange:()=>c(e)}),!e.isDefault&&(0,n.jsx)(k.z,{variant:"ghost",size:"sm",onClick:()=>l(e),children:"Supprimer"})]})]},e.id))})]},e))})}},3836:function(e,t,r){"use strict";r.r(t),r.d(t,{CreateCheckInItem:function(){return d}});var n=r(7437),i=r(2265),s=r(1865),o=r(8110),a=r(4578),c=r(6806);let l=a.z.object({name:a.z.string().min(1,"Le nom est requis"),description:a.z.string().optional(),icon:a.z.string().optional(),category:a.z.string().min(1,"La cat\xe9gorie est requise"),isRequired:a.z.boolean().default(!1)}),u=["Fluides","S\xe9curit\xe9","\xc9clairage","Freins","Contr\xf4les","Visibilit\xe9","\xc9quipement","\xc9tat g\xe9n\xe9ral"];function d(){let[e,t]=(0,i.useState)(!1),[r,a]=(0,i.useState)(!1),{register:d,handleSubmit:f,reset:m,formState:{errors:p}}=(0,s.cI)({resolver:(0,o.F)(l)}),h=async e=>{try{a(!0);let r=await fetch("/api/settings/checkin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok)throw Error("Failed to create check-in item");m(),t(!1),window.location.reload()}catch(e){console.error("Error creating check-in item:",e),alert("Une erreur est survenue lors de la cr\xe9ation")}finally{a(!1)}};return(0,n.jsxs)("div",{children:[(0,n.jsx)(c.z,{onClick:()=>t(!e),children:e?"Annuler":"Ajouter un \xe9l\xe9ment"}),e&&(0,n.jsx)("div",{className:"mt-4 bg-white shadow rounded-lg p-4",children:(0,n.jsxs)("form",{onSubmit:f(h),className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nom"}),(0,n.jsx)("input",{type:"text",...d("name"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),p.name&&(0,n.jsx)("p",{className:"mt-1 text-sm text-red-600",children:p.name.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,n.jsx)("textarea",{...d("description"),rows:2,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Ic\xf4ne"}),(0,n.jsx)("input",{type:"text",...d("icon"),placeholder:"\uD83D\uDD27",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cat\xe9gorie"}),(0,n.jsxs)("select",{...d("category"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",children:[(0,n.jsx)("option",{value:"",children:"S\xe9lectionner une cat\xe9gorie"}),u.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]}),p.category&&(0,n.jsx)("p",{className:"mt-1 text-sm text-red-600",children:p.category.message})]}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",...d("isRequired"),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,n.jsx)("label",{className:"ml-2 block text-sm text-gray-900",children:"\xc9l\xe9ment obligatoire"})]}),(0,n.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,n.jsx)(c.z,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),(0,n.jsx)(c.z,{type:"submit",disabled:r,children:r?"Cr\xe9ation...":"Cr\xe9er"})]})]})})]})}},4104:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return o}});var n=r(7437),i=r(13),s=r(4033);function o(e){let{title:t,showBack:r=!1,action:o,description:a}=e,c=(0,s.useRouter)();return(0,n.jsx)("header",{className:"sticky top-0 z-50 bg-white border-b border-gray-200",children:(0,n.jsxs)("div",{className:"px-4 h-14 flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[r&&(0,n.jsx)("button",{onClick:()=>c.back(),className:"p-1 -ml-1 rounded-full hover:bg-gray-50",children:(0,n.jsx)(i.Z,{className:"h-6 w-6"})}),(0,n.jsx)("h1",{className:"text-lg font-semibold",children:t})]}),o&&(0,n.jsx)("div",{children:o})]})})}},6806:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var n=r(7437),i=r(2265),s=r(6061),o=r(345);let a=(0,s.j)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=(0,i.forwardRef)((e,t)=>{let{className:r,variant:i,size:s,...c}=e;return(0,n.jsx)("button",{className:(0,o.cn)(a({variant:i,size:s}),r),ref:t,...c})});c.displayName="Button"},345:function(e,t,r){"use strict";r.d(t,{cn:function(){return s},iV:function(){return a},p6:function(){return o}});var n=r(7042),i=r(4769);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.m6)((0,n.W)(t))}function o(e){return new Date(e).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})}function a(e){switch(e.toLowerCase()){case"critical":return"bg-red-100 text-red-800";case"warning":return"bg-yellow-100 text-yellow-800";case"good":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}}},5744:function(e,t,r){"use strict";function n(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(e?.(n),!1===r||!n.defaultPrevented)return t?.(n)}}r.d(t,{M:function(){return n}})},2210:function(e,t,r){"use strict";r.d(t,{F:function(){return i},e:function(){return s}});var n=r(2265);function i(...e){return t=>e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}function s(...e){return n.useCallback(i(...e),e)}},6989:function(e,t,r){"use strict";r.d(t,{b:function(){return o},k:function(){return s}});var n=r(2265),i=r(7437);function s(e,t){let r=n.createContext(t),s=e=>{let{children:t,...s}=e,o=n.useMemo(()=>s,Object.values(s));return(0,i.jsx)(r.Provider,{value:o,children:t})};return s.displayName=e+"Provider",[s,function(i){let s=n.useContext(r);if(s)return s;if(void 0!==t)return t;throw Error(`\`${i}\` must be used within \`${e}\``)}]}function o(e,t=[]){let r=[],s=()=>{let t=r.map(e=>n.createContext(e));return function(r){let i=r?.[e]||t;return n.useMemo(()=>({[`__scope${e}`]:{...r,[e]:i}}),[r,i])}};return s.scopeName=e,[function(t,s){let o=n.createContext(s),a=r.length;r=[...r,s];let c=t=>{let{scope:r,children:s,...c}=t,l=r?.[e]?.[a]||o,u=n.useMemo(()=>c,Object.values(c));return(0,i.jsx)(l.Provider,{value:u,children:s})};return c.displayName=t+"Provider",[c,function(r,i){let c=i?.[e]?.[a]||o,l=n.useContext(c);if(l)return l;if(void 0!==s)return s;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let i=r.reduce((t,{useScope:r,scopeName:n})=>{let i=r(e),s=i[`__scope${n}`];return{...t,...s}},{});return n.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}(s,...t)]}},9381:function(e,t,r){"use strict";r.d(t,{WV:function(){return a},jH:function(){return c}});var n=r(2265),i=r(4887),s=r(7256),o=r(7437),a=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let Node=n.forwardRef((e,r)=>{let{asChild:n,...i}=e,a=n?s.g7:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,o.jsx)(a,{...i,ref:r})});return Node.displayName=`Primitive.${t}`,{...e,[t]:Node}},{});function c(e,t){e&&i.flushSync(()=>e.dispatchEvent(t))}},7256:function(e,t,r){"use strict";r.d(t,{g7:function(){return o}});var n=r(2265),i=r(2210),s=r(7437),o=n.forwardRef((e,t)=>{let{children:r,...i}=e,o=n.Children.toArray(r),c=o.find(l);if(c){let e=c.props.children,r=o.map(t=>t!==c?t:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,s.jsx)(a,{...i,ref:t,children:n.isValidElement(e)?n.cloneElement(e,void 0,r):null})}return(0,s.jsx)(a,{...i,ref:t,children:r})});o.displayName="Slot";var a=n.forwardRef((e,t)=>{let{children:r,...s}=e;if(n.isValidElement(r)){let e,o;let a=(e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.props.ref:r.props.ref||r.ref;return n.cloneElement(r,{...function(e,t){let r={...t};for(let n in t){let i=e[n],s=t[n],o=/^on[A-Z]/.test(n);o?i&&s?r[n]=(...e)=>{s(...e),i(...e)}:i&&(r[n]=i):"style"===n?r[n]={...i,...s}:"className"===n&&(r[n]=[i,s].filter(Boolean).join(" "))}return{...e,...r}}(s,r.props),ref:t?(0,i.F)(t,a):a})}return n.Children.count(r)>1?n.Children.only(null):null});a.displayName="SlotClone";var c=({children:e})=>(0,s.jsx)(s.Fragment,{children:e});function l(e){return n.isValidElement(e)&&e.type===c}},6459:function(e,t,r){"use strict";r.d(t,{W:function(){return i}});var n=r(2265);function i(e){let t=n.useRef(e);return n.useEffect(()=>{t.current=e}),n.useMemo(()=>(...e)=>t.current?.(...e),[])}},3763:function(e,t,r){"use strict";r.d(t,{T:function(){return s}});var n=r(2265),i=r(6459);function s({prop:e,defaultProp:t,onChange:r=()=>{}}){let[s,o]=function({defaultProp:e,onChange:t}){let r=n.useState(e),[s]=r,o=n.useRef(s),a=(0,i.W)(t);return n.useEffect(()=>{o.current!==s&&(a(s),o.current=s)},[s,o,a]),r}({defaultProp:t,onChange:r}),a=void 0!==e,c=a?e:s,l=(0,i.W)(r),u=n.useCallback(t=>{if(a){let r="function"==typeof t?t(e):t;r!==e&&l(r)}else o(t)},[a,e,o,l]);return[c,u]}},1030:function(e,t,r){"use strict";r.d(t,{b:function(){return i}});var n=r(2265),i=globalThis?.document?n.useLayoutEffect:()=>{}},5184:function(e,t,r){"use strict";r.d(t,{D:function(){return i}});var n=r(2265);function i(e){let t=n.useRef({value:e,previous:e});return n.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}},4977:function(e,t,r){"use strict";r.d(t,{t:function(){return s}});var n=r(2265),i=r(1030);function s(e){let[t,r]=n.useState(void 0);return(0,i.b)(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let n,i;if(!Array.isArray(t)||!t.length)return;let s=t[0];if("borderBoxSize"in s){let e=s.borderBoxSize,t=Array.isArray(e)?e[0]:e;n=t.inlineSize,i=t.blockSize}else n=e.offsetWidth,i=e.offsetHeight;r({width:n,height:i})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}}},function(e){e.O(0,[991,948,971,472,744],function(){return e(e.s=3079)}),_N_E=e.O()}]);