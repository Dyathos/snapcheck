(()=>{var e={};e.id=946,e.ids=[946],e.modules={3524:e=>{"use strict";e.exports=require("@prisma/client")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6860:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>a.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>o,routeModule:()=>h,tree:()=>d});var t=r(7096),i=r(6132),n=r(7284),a=r.n(n),l=r(2564),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);r.d(s,c);let d=["",{children:["vehicles",{children:["[id]",{children:["checkin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,2112)),"/Users/capmission/Documents/carcheck/src/app/vehicles/[id]/checkin/page.tsx"]}]},{}]},{loading:[()=>Promise.resolve().then(r.bind(r,4051)),"/Users/capmission/Documents/carcheck/src/app/vehicles/[id]/loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,8063)),"/Users/capmission/Documents/carcheck/src/app/vehicles/[id]/not-found.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,5607)),"/Users/capmission/Documents/carcheck/src/app/layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,6097)),"/Users/capmission/Documents/carcheck/src/app/error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,8056)),"/Users/capmission/Documents/carcheck/src/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,5666)),"/Users/capmission/Documents/carcheck/src/app/not-found.tsx"]}],o=["/Users/capmission/Documents/carcheck/src/app/vehicles/[id]/checkin/page.tsx"],u="/vehicles/[id]/checkin/page",m={require:r,loadChunk:()=>Promise.resolve()},h=new t.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/vehicles/[id]/checkin/page",pathname:"/vehicles/[id]/checkin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5426:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,7490,23)),Promise.resolve().then(r.bind(r,1372))},7506:(e,s,r)=>{Promise.resolve().then(r.bind(r,6415)),Promise.resolve().then(r.bind(r,1372))},826:(e,s,r)=>{Promise.resolve().then(r.bind(r,1372))},6415:(e,s,r)=>{"use strict";r.r(s),r.d(s,{CheckInForm:()=>d});var t=r(3854),i=r(4218),n=r(1018),a=r(8746),l=r(8711);function c({items:e,onItemSelect:s,selectedItems:r}){let[n,c]=(0,i.useState)(null),d=Array.from(new Set(e.map(e=>e.category))),o=n?e.filter(e=>e.category===n):e,u=e=>{switch(e){case"warning":return"bg-yellow-100 text-yellow-800";case"critical":return"bg-red-100 text-red-800";default:return"bg-green-100 text-green-800"}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[t.jsx(l.z,{variant:null===n?"default":"outline",onClick:()=>c(null),className:"text-sm",children:"Tous"}),d.map(e=>t.jsx(l.z,{variant:n===e?"default":"outline",onClick:()=>c(e),className:"text-sm",children:e},e))]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(e=>t.jsx("button",{onClick:()=>s(e),className:`flex items-center p-4 rounded-lg border transition-colors ${r.includes(e.id)?"border-red-500 bg-red-50":"border-gray-200 hover:border-blue-500"}`,children:(0,t.jsxs)("div",{className:"flex-1 text-left",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:"text-lg",children:e.icon}),t.jsx("h3",{className:"font-medium",children:e.name})]}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:e.description}),e.status&&(0,t.jsxs)(a.C,{className:`mt-2 ${u(e.status)}`,children:[e.status,e.severity&&` - ${e.severity}`]})]})},e.id))})]})}function d({vehicleId:e,items:s}){let r=(0,n.useRouter)(),[a,d]=(0,i.useState)(1),[o,u]=(0,i.useState)([]),[m,h]=(0,i.useState)({}),[x,v]=(0,i.useState)(!1),g=e=>{u(s=>s.includes(e.id)?s.filter(s=>s!==e.id):[...s,e.id])},p=(e,s)=>{h(r=>({...r,[e]:{...r[e],severity:s}}))},f=(e,s)=>{h(r=>({...r,[e]:{...r[e],description:s}}))},b=async()=>{try{v(!0);let t=s.map(e=>({itemId:e.id,status:o.includes(e.id)?"warning":"ok",severity:o.includes(e.id)?m[e.id]?.severity||"low":null,description:o.includes(e.id)?m[e.id]?.description||"":null})),i=await fetch(`/api/vehicles/${e}/checkin`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({updates:t})});if(!i.ok)throw Error("Erreur lors de la mise \xe0 jour");r.refresh(),r.push(`/vehicles/${e}`)}catch(e){console.error("Error updating check-in:",e),alert("Une erreur est survenue lors de la mise \xe0 jour")}finally{v(!1)}};return(0,t.jsxs)("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${a>=1?"bg-blue-600 text-white":"bg-gray-200"}`,children:"1"}),t.jsx("div",{className:"w-16 h-1 bg-gray-200",children:t.jsx("div",{className:`h-full ${a>=2?"bg-blue-600":"bg-gray-200"}`})}),t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${a>=2?"bg-blue-600 text-white":"bg-gray-200"}`,children:"2"}),t.jsx("div",{className:"w-16 h-1 bg-gray-200",children:t.jsx("div",{className:`h-full ${a>=3?"bg-blue-600":"bg-gray-200"}`})}),t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${a>=3?"bg-blue-600 text-white":"bg-gray-200"}`,children:"3"})]})}),(()=>{switch(a){case 1:return(0,t.jsxs)("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:t.jsx("p",{className:"text-sm text-blue-700",children:"S\xe9lectionnez les \xe9l\xe9ments pr\xe9sentant un probl\xe8me. Les \xe9l\xe9ments non s\xe9lectionn\xe9s seront consid\xe9r\xe9s comme \xe9tant en bon \xe9tat."})}),t.jsx(c,{items:s,onItemSelect:g,selectedItems:o}),t.jsx("div",{className:"flex justify-end",children:t.jsx(l.z,{onClick:()=>d(2),disabled:0===o.length,children:"Continuer"})})]});case 2:return(0,t.jsxs)("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg",children:t.jsx("p",{className:"text-sm text-yellow-700",children:"Pr\xe9cisez la gravit\xe9 et ajoutez une description pour chaque \xe9l\xe9ment s\xe9lectionn\xe9."})}),t.jsx("div",{className:"space-y-4",children:o.map(e=>{let r=s.find(s=>s.id===e);return r?(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg border space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:"text-lg",children:r.icon}),t.jsx("h3",{className:"font-medium",children:r.name})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Gravit\xe9"}),(0,t.jsxs)("select",{value:m[e]?.severity||"low",onChange:s=>p(e,s.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",children:[t.jsx("option",{value:"low",children:"Faible"}),t.jsx("option",{value:"medium",children:"Moyenne"}),t.jsx("option",{value:"high",children:"Haute"}),t.jsx("option",{value:"critical",children:"Critique"})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),t.jsx("textarea",{value:m[e]?.description||"",onChange:s=>f(e,s.target.value),rows:2,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]})]})]},e):null})}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx(l.z,{variant:"outline",onClick:()=>d(1),children:"Retour"}),t.jsx(l.z,{onClick:()=>d(3),children:"Continuer"})]})]});case 3:return(0,t.jsxs)("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:t.jsx("p",{className:"text-sm text-green-700",children:"V\xe9rifiez le r\xe9capitulatif des probl\xe8mes avant de valider."})}),(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("h3",{className:"font-medium text-lg",children:"\xc9l\xe9ments avec probl\xe8mes"}),t.jsx("div",{className:"space-y-4",children:o.map(e=>{let r=s.find(s=>s.id===e);return r?(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg border",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:"text-lg",children:r.icon}),t.jsx("h4",{className:"font-medium",children:r.name})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:["Gravit\xe9: ",m[e]?.severity||"faible"]})]}),m[e]?.description&&t.jsx("p",{className:"mt-2 text-sm text-gray-600",children:m[e].description})]},e):null})}),(0,t.jsxs)("div",{className:"mt-6",children:[t.jsx("h3",{className:"font-medium text-lg",children:"\xc9l\xe9ments en bon \xe9tat"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:[s.length-o.length," \xe9l\xe9ments sont en bon \xe9tat."]})]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx(l.z,{variant:"outline",onClick:()=>d(2),children:"Retour"}),t.jsx(l.z,{onClick:b,disabled:x,children:x?"Enregistrement...":"Valider"})]})]});default:return null}})()]})}},8746:(e,s,r)=>{"use strict";r.d(s,{C:()=>c});var t=r(3854),i=r(4218),n=r(2457),a=r(8504);let l=(0,n.j)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/80",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"bg-green-500 text-white hover:bg-green-400",warning:"bg-yellow-500 text-black hover:bg-yellow-400"}},defaultVariants:{variant:"default"}}),c=(0,i.forwardRef)(({className:e,variant:s,children:r,...i},n)=>t.jsx("div",{className:(0,a.cn)(l({variant:s}),e),ref:n,...i,children:r}));c.displayName="Badge"},8711:(e,s,r)=>{"use strict";r.d(s,{z:()=>c});var t=r(3854),i=r(4218),n=r(2457),a=r(8504);let l=(0,n.j)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=(0,i.forwardRef)(({className:e,variant:s,size:r,...i},n)=>t.jsx("button",{className:(0,a.cn)(l({variant:s,size:r}),e),ref:n,...i}));c.displayName="Button"},2112:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>x});var t=r(4656),i=r(1412),n=r(6085),a=r(9730),l=r(5153);let c=(0,l.createProxy)(String.raw`/Users/capmission/Documents/carcheck/src/app/vehicles/[id]/checkin/CheckInForm.tsx`),{__esModule:d,$$typeof:o}=c;c.default;let u=(0,l.createProxy)(String.raw`/Users/capmission/Documents/carcheck/src/app/vehicles/[id]/checkin/CheckInForm.tsx#CheckInForm`);async function m(e){let s=await a._.vehicle.findUnique({where:{id:e},include:{checkInParts:{include:{item:!0}}}});return s||(0,i.notFound)(),s}async function h(){return a._.checkInItem.findMany({orderBy:{category:"asc"}})}async function x({params:e}){let[s,r]=await Promise.all([m(e.id),h()]),i=r.map(e=>{let r=s.checkInParts.find(s=>s.itemId===e.id);return{...e,status:r?.status||"ok",description:e.description||""}});return(0,t.jsxs)(t.Fragment,{children:[t.jsx(n.ZP,{title:`Check-in quotidien - ${s.brand}`,showBack:!0}),t.jsx("div",{className:"p-4",children:t.jsx("div",{className:"max-w-7xl mx-auto",children:t.jsx(u,{vehicleId:s.id,items:i})})})]})}},4051:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>n});var t=r(4656),i=r(6085);function n(){return(0,t.jsxs)(t.Fragment,{children:[t.jsx(i.ZP,{title:"Chargement...",showBack:!0}),t.jsx("div",{className:"p-4 space-y-6",children:(0,t.jsxs)("div",{className:"bg-white shadow rounded-lg divide-y divide-gray-200",children:[t.jsx("div",{className:"p-4",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("div",{className:"h-6 w-32 bg-gray-200 rounded animate-pulse"}),t.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded animate-pulse"})]}),t.jsx("div",{className:"h-6 w-20 bg-gray-200 rounded animate-pulse"})]})}),(0,t.jsxs)("div",{className:"p-4",children:[t.jsx("div",{className:"h-6 w-40 bg-gray-200 rounded animate-pulse mb-4"}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("div",{className:"h-4 w-48 bg-gray-200 rounded animate-pulse"}),t.jsx("div",{className:"h-4 w-36 bg-gray-200 rounded animate-pulse"})]})]}),(0,t.jsxs)("div",{className:"p-4",children:[t.jsx("div",{className:"h-6 w-32 bg-gray-200 rounded animate-pulse mb-4"}),t.jsx("div",{className:"space-y-3",children:[1,2,3].map(e=>(0,t.jsxs)("div",{className:"flex justify-between items-start bg-gray-50 p-3 rounded-md",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded animate-pulse"}),t.jsx("div",{className:"h-3 w-48 bg-gray-200 rounded animate-pulse"})]}),t.jsx("div",{className:"h-5 w-16 bg-gray-200 rounded animate-pulse"})]},e))})]})]})})]})}},8063:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>l});var t=r(4656),i=r(4353),n=r.n(i),a=r(6085);function l(){return(0,t.jsxs)(t.Fragment,{children:[t.jsx(a.ZP,{title:"V\xe9hicule non trouv\xe9",showBack:!0}),t.jsx("div",{className:"p-4",children:(0,t.jsxs)("div",{className:"max-w-xl mx-auto text-center",children:[t.jsx("h2",{className:"text-2xl font-bold tracking-tight text-gray-900",children:"V\xe9hicule introuvable"}),t.jsx("p",{className:"mt-2 text-gray-500",children:"D\xe9sol\xe9, le v\xe9hicule que vous recherchez n'existe pas ou a \xe9t\xe9 supprim\xe9."}),t.jsx("div",{className:"mt-6",children:t.jsx(n(),{href:"/vehicles",className:"text-blue-600 hover:text-blue-500",children:"Retour \xe0 la liste des v\xe9hicules"})})]})})]})}},789:(e,s,r)=>{"use strict";r.d(s,{Z:()=>n});var t=r(4218);let i=t.forwardRef(function({title:e,titleId:s,...r},i){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},r),e?t.createElement("title",{id:s},e):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}),n=i},2457:(e,s,r)=>{"use strict";r.d(s,{j:()=>a});var t=r(9395);let i=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,n=t.W,a=(e,s)=>r=>{var t;if((null==s?void 0:s.variants)==null)return n(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:a,defaultVariants:l}=s,c=Object.keys(a).map(e=>{let s=null==r?void 0:r[e],t=null==l?void 0:l[e];if(null===s)return null;let n=i(s)||i(t);return a[e][n]}),d=r&&Object.entries(r).reduce((e,s)=>{let[r,t]=s;return void 0===t||(e[r]=t),e},{}),o=null==s?void 0:null===(t=s.compoundVariants)||void 0===t?void 0:t.reduce((e,s)=>{let{class:r,className:t,...i}=s;return Object.entries(i).every(e=>{let[s,r]=e;return Array.isArray(r)?r.includes({...l,...d}[s]):({...l,...d})[s]===r})?[...e,r,t]:e},[]);return n(e,c,o,null==r?void 0:r.class,null==r?void 0:r.className)}}};var s=require("../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[271,503,445],()=>r(6860));module.exports=t})();