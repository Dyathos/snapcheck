"use strict";(()=>{var e={};e.id=998,e.ids=[998],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3292:e=>{e.exports=require("fs/promises")},1017:e=>{e.exports=require("path")},5383:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>g,originalPathname:()=>v,patchFetch:()=>j,requestAsyncStorage:()=>f,routeModule:()=>d,serverHooks:()=>m,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>w});var a={};t.r(a),t.d(a,{POST:()=>c});var o=t(884),i=t(6132),s=t(1040),n=t(3292),u=t(5798),p=t(1017),l=t.n(p);async function c(e){try{let r=await e.formData(),t=r.get("file"),a=r.get("vehicleId");if(!t)return u.Z.json({error:"No file uploaded"},{status:400});let o=await t.arrayBuffer(),i=Buffer.from(o),s=Date.now(),p=`${s}-${t.name}`,c=l().join(process.cwd(),"public","uploads","inspections",a),d=l().join(c,p);await (0,n.writeFile)(l().join(process.cwd(),"public","uploads","inspections",a),"",{flag:"a"}).catch(()=>{}),await (0,n.writeFile)(d,i);let f=`/uploads/inspections/${a}/${p}`;return u.Z.json({fileUrl:f})}catch(e){return console.error("Error uploading file:",e),u.Z.json({error:"Error uploading file"},{status:500})}}let d=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/upload/route",pathname:"/api/upload",filename:"route",bundlePath:"app/api/upload/route"},resolvedPagePath:"/Users/capmission/Documents/carcheck/src/app/api/upload/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:f,staticGenerationAsyncStorage:h,serverHooks:m,headerHooks:g,staticGenerationBailout:w}=d,v="/api/upload/route";function j(){return(0,s.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:h})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[271,107],()=>t(5383));module.exports=a})();